Overlay resource allocation mechanism of P2P application intensifies congestion at backbone. Current traffic engineering algorithm doesnÂ´t adapt to P2P traffic demand. It fails to achieve load balance in link utilization. To tackle this problem, we propose a united resource allocation architecture called Pharos by collaboration of both ISP and P2P. In the architecture, we establish overlay path metrics system to expose ISP traffic policy and physical link states to P2P. We facilitate P2P system to conduct topology aware overlay routing by peer selection assistance service. We implement the prototype system to integrate biased peer selection and rate control module at peer end. They both respond to network states variation obtained from aforementioned service at ISP end. We verify by simulation that maximum link utilization can be effectively controlled around the objective level. With efficient use of network resource, P2P system also enhances its distribution performance. The completion time could cut down up to 20%.
