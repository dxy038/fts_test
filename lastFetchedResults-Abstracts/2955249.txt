Applications of waveguide junctions with ferrite posts have been of wide-ranging use in microwave devices and circuits, and research on them has been continued steadily. In case of the circulator, it is required that as much as possible of the input power is delivered to the output port. For the optimal design, a numerical analysis technique is required. The approach employed in this paper is a combination of the finite-element method and the boundary element method, which is called the hybrid finite element method. In the shape optimization method, the position of the nodes, that compose the shape, are chosen as the design variables. Since the objective function is defined as a function of the design and state variables, it is necessary to calculate the total derivatives with respect to the design variables. The design sensitivity analysis is used to obtain the derivatives. To overcome the difficulty in inverting the system matrix, which arises in the process of design sensitivity analysis, adjoint variables are used. The steepest descent algorithm is used for updating the design variables. The circulator is optimized for the highest performance at a special frequency.
