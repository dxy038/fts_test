An undulator using permanent magnets is an effective means of generating high-intensity synchrotron radiation. Since mass-produced magnets include some disparity in the magnitudes and orientations of their magnetic fields, the magnetic field generated by a magnet array deviates from the ideal. In this paper, a method for optimal adjustment of an undulator using a mathematical programming method is described. An objective function W is introduced, which indicates the extent of deviation between the measured and the ideal magnetic field. When the value of W is minimized in iterated calculations, the optimum magnet positions are obtained. This method was successfully applied to a Halbach-type undulator, both in simulations and experiments.
