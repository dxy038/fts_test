We study the real-time data aggregation in contention-based wireless sensor networks that use CSMA/CA MAC layer protocols as defined in IEEE 802.15.4 or IEEE 802.11 standard. The problem is, for a given data aggregation tree and a delay bound, to maximize the overall transmission success probability of all sensor nodes within the delay bound. In CSMA/CA protocols, the success probability and the expected transmission delay are highly sensitive to node interference, while the node interference is often very high in the large scale sensor networks. We propose a hybrid method that combines the CSMA/CA protocol with TDMA scheduling of transmissions. We divide the child nodes of a parent into groups and schedule the groups into different "time-frames" for transmission. Within the group, the nodes still use the CSMA/CA protocol to compete for data transmission. By doing so, we divide a large collision domain (i.e., all child nodes competing to transmit to their parent) into several small collision domains (i.e., a group of nodes competing for transmission), and the success probability can thus be significantly improved. On the other hand, the "time-frame" used in our method is much larger than the timeslot used in pure TDMA protocols. It only requires loose synchronization of clocks, which is suitable for low-cost sensor networks. We transform our objective of maximizing the overall success probability into minimizing the overall node interference. We then convert our problem to the maximum weight k-cut problem, which is NP-hard. We propose two efficient heuristic algorithms to solve the problem. Simulation results have shown that our proposed method can improve the success probability significantly compared with the method that uses pure CSMA/CA protocols.
