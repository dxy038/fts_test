We address the problem of optimizing resource allocation for Perceptually based unequal packet protection (PUPP) in a packet based voice carrying network. For that purpose, we design a novel real-time working perceptually based classifier (PBC) optimizing the assignment of voice packets to either a premium (Pch) or an ordinary (Och) transmission channel with regard to packet perceptual importance. In particular, our PBC is based on sliding window optimization (SWO) and implement PESQa, an improved method to real-time estimation of speech quality. Based on this PBC and a differentiated service (DS) implementation of the Pch/Och, objective results indicate that 70% premium packet assignments optimizes performance over a broad range of loss scenarios on a bottleneck link. Additionally, packet loss statistics gives a clear indication on criteria for optimizing PUPP Pch/Och
