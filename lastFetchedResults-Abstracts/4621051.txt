This paper investigated a controller design method for double loop comprising of inner current loop and outer DC voltage loop based on virtual resistor used in a LCL-based bidirectional DC/AC converter which is the front stage of the two-stage power conversion system (PCS). First, besides considering the extent of resonance damping to design the feedback coefficient of the capacitor currents, the limit of the linear modulation area and its impact on phase margin of the current loop are also considered. Then according to RouthÂ´s criterion and the amplitude error, the current-loop regulators are designed and its robustness is discussed by the bode diagrams. The control strategy that DC voltage is controlled by DC/AC converter for the PCS can achieve optimal charge-discharge mode. Experimental results have verified the rationality of the designed parameters and the validity of the control strategy.
