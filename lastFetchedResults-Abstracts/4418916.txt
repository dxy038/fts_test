Routing Protocol for Low-Power and Lossy Networks (RPL) is the Internet Engineering Task Force (IETF) standard for IPv6 routing in Low-power and Lossy Networks (LLNs). By using the Objective Function (OF) and a collection of routing metrics, it can build a Destination Oriented Directed Acyclic Graph (DODAG). There are two kinds of OFs specified by the IETF, Objective Function Zero (OF0) and Minimum Rank with Hysteresis Objective Function (MRHOF) respectively. The former is based on minimum hop count while the latter is based on Expected Transmission Count (ETX) and is more preferable. However, as the network size increases, both MRHOF and OF0 will introduce long single hop, which may become the routing bottleneck that restricts the entire network. In this paper, the problem is solved by optimizing the MRHOF with a new routing metric, the PER-HOP ETX. Instead of working with additive ETX metrics along a route, PER-HOP ETX distributes the ETX value to each node along the route. This method can achieve better routing performance in large-scale sensor network scenario. A detailed mathematical proof is given in the paper, and simulations were carried out based on the Contiki operating system. Experiments showed that PER-HOP ETX, the proposed optimization outperforms OF0 and ETX in terms of network latency, packet delivery ratio and energy consumption when the network scale becomes large.
