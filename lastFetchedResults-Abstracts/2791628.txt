The paper deals with the time optimal control of automatically driven cars modeled with gear shift as discrete control input beside the continuous ones in a test path between corridors. The car is required to avoid a static obstacle or performing double lane change. The problem can be formulated as a mixed-integer optimal control problem (MIOCP). The resulting MIOCP is solved by reformulating it to static mixed-integer nonlinear program (MINLP) using time discretization and direct multiple shooting method. Non-commercial open software packages are applied that substantially use the gradients of the objective function and the Jacobians of the constraints exploiting sparsity. A novel algorithm and implementation is presented for computing the derivatives of the complex state trajectory joining equations. This algorithm was given in the form of matrix differential equations whose structure allowed to compute their solution using RK4 in matrix form. The elaborated method can be applied both for combustion engine and electric driven cars. It can form the basis to generate an offline database of a central general collision avoidance system (CAS) for varying path parameters on a grid which can support real time applications.
