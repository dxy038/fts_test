We study the performance of bidirectional TCP/IP connections over a network that uses rate-based flow and congestion control. An example of such a network is an asynchronous transfer mode (ATM) network using the available bit rate (ABR) service. The sharing of a common buffer by TCP packets and acknowledgment (acks) has been known to result in an effect called ack compression, where acks of a connection arrive at the source bunched together, resulting in unfairness and degraded throughput. It has been the expectation that maintaining a smooth flow of data using rate-based flow control would mitigate, if not eliminate, the various forms of burstiness experienced with the TCP window flow control. However, we show that the problem of TCP ack compression appears even while operating over a rate-controlled channel. The degradation in throughput due to bidirectional traffic can be significant. For example, even in the simple case of symmetrical connections with adequate window sizes, the throughput of each connection is only 66.67% of that under one-way traffic. By analyzing the periodic bursty behavior of the source IP queue, we derive estimates for the maximum queue size and arrive at a simple predictor for the degraded throughput, for relatively general situations. We validate our analysis using simulation on an ATM network using the explicit rate option of the ABR service. The analysis predicts the behavior of the queue and the throughput degradation in simple configurations and in more general situations
