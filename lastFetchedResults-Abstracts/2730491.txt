Guaranteeing a safe, efficient, and comfortable traveling system for pedestrians is one of the most important aspects of an intelligent transportation system. The microscopic simulation of pedestrian flow has attracted increasing research attention in recent years since a reliable simulation model for pedestrian flow may greatly benefit engineers and operators in mass transportation management, as well as designers and planners in urban planning and architecture. This paper introduces CityFlow, an agent-based microscopic pedestrian flow simulation model. The building floor plan in the model is represented by a continuous space constructed in a network approach, and each pedestrian is regarded as a self-adapted agent. Agent movement is implemented in a utility maximization approach by considering various human behaviors. The influences of parameters in the model on the simulation results are investigated. Typical pedestrian flow phenomena, including the unidirectional and bidirectional flow in a corridor as well as the flow through bottlenecks, are simulated. The simulation results are further compared with empirical study results. The comparison reveals that the model can approach the density-speed fundamental diagrams and the empirical flow rates at bottlenecks within acceptable system dimensions. The simulation results of the bidirectional pedestrian flow also show that the model can reproduce the lane-formation phenomenon.
