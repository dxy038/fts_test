In this paper, we present a method to solve inverse problems of electromagnetic circuit design, which are formulated as a topology optimization problem. Indeed, by imposing the magnetic field inside a region, we search the best material distribution into variable domains. To perform this, we minimize the quadratic error between the prescribed magnetic field and the one computed by a finite element method (FEM). A dedicated software was developed in MATLAB using fmincon routine and FEM Magnetics (FEMM) software; this code is named ${rm ATOP}^{rm TO}$ for algorithm to optimization propulsion using topology optimization. To perform the first derivative of the objective function, we implemented an adjoint variable method. Indeed, this approach makes it possible to provide the derivative by only two uses of the finite element tool. Nevertheless, the problem is discrete because we take only two possibilities: with or without material. Thus, the solid isotropic material with penalization method was used to penalize intermediate values to have discrete solutions. Some numerical experiments with 40 and 800 variables concerning circuit designs validated our approach. This represents a first study to design a Hall effect thruster.
