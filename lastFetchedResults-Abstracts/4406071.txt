In this paper we propose a novel concept of human-machine-environment cyber-physical system (HME-CPS) in smart homes to support independent living of elderly and physically disabled people. Within this system, a hierarchical task planning approach is developed on purpose of combining qualitative reasoning and quantitative calculation via bidirectional data exchanges between C++ and Prolog. A group of experiments are conducted with respect to a housework task. Their results show C++ and Prolog are connected by an software interface design that enables different formed data to be exchanged among C++ and Prolog modules of the HME-CPS, and the complete process of hierarchical task planning is accomplished in both modes of autonomous planning of the intelligent agent and cooperated planning by human-machine collaboration (HMC). Moreover, methodologies and techniques of the proposed HME-CPS are extendable and adaptive to real applications with robustness and scalability.
