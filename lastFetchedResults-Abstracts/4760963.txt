This paper proposes an online resource allocation algorithm for weighted sum rate maximization in energy harvesting downlink multiuser multiple-input multiple-output (MIMO) systems. Taking into account the discrete nature of the modulation and coding rates (MCRs) used in practice, we formulate a stochastic dynamic programming (SDP) problem to jointly design the MIMO precoders, select the MCRs, assign the subchannels, and optimize the energy consumption over multiple time slots with causal and statistical energy arrival information and statistical channel state information. Solving this high-dimensional SDP entails several difficulties: the SDP has a nonconcave objective function, the optimization variables are of mixed binary and continuous types, and the number of optimization variables is on the order of thousands. We propose a new method to solve this NP-hard SDP by decomposing the high-dimensional SDP into an equivalent three-layer optimization problem and show that efficient algorithms can be used to solve each layer separately. The decomposition reduces the computational burden and breaks the curse of dimensionality.
