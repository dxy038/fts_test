The paper deals with the approximately time-optimal control of automatically driven cars modeled with gear shift as discrete control input beside the continuous ones in a path between two path boundaries. The path boundaries are defined by their corner points that may be the result of image processing in real time or prescribed in advance. The path is divided into sections for which separate optimum control problems are solved in a nonlinear moving horizon predictive control (NMHPC) fashion increasing the semi-online character of the approach. In each section the problem can be formulated as a mixed-integer optimal control problem (MIOCP). The resulting MIOCP is solved by reformulating it to static mixed-integer nonlinear program (MINLP) using time discretization and direct multiple shooting method. Non-commercial open software packages are applied that substantially use the gradients of the objective function and the Jacobians of the constraints exploiting sparsity. The elaborated method can be applied both for combustion engine and electric driven cars. It can also form the basis to generate an offline database of a central general collision avoidance system (CAS) for varying path parameters on a grid which can further support real time applications.
