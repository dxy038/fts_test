Virtualization is one of the most promising ways to enhance the scalability of data centers. Individual physical machines(PMs) can be carved into multiple virtual machines(VMs) for consolidation. In fact, most data centers are still using static greedy allocation of resources to VMs, regardless of the resource characteristics of both VMs and PMs. In this paper, we address that by optimizing the placement of VMs, we can save the cost of resource usage and improve the performance of applications at the same time. The objective is to minimize the total traffic in a data center. We should consolidate VMs with high inter traffic on the same PM, because VMs on the same PM can communicate using only memory copy. We also need to reduce the number of active PMs to save the power cost. This paper first formulates the VM placement as an optimization problem. Then, we propose a heuristic algorithm based on clustering to deploy VMs on PMs. A greedy algorithm is used for the online scenario. In the end, we experiment on data sets collected from a data center. Results show that our algorithm can efficiently reduce the overall traffic and power cost in the data center.
