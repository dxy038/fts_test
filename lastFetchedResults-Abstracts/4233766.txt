To solve the problem that the integral termination condition of performance index function can not be fixed and to avoid settling high dimensional two-point-boundary-value model, the energy as a new integral variable instead of time variable has been introduced into the flight trajectory optimization. The trajectory optimization model established by energy-state method was transformed to a nonlinear programming problem. Restart PRP conjugate gradient method was proposed to solve the non-quadratic objective function. Finally, simulation is carried out based on an UAV model. The results show that compared with PRP method, the restart PRP method saves fuel by 6.76%, and the flight time of optimal flight vertical profile shortens 6.71%.
