This paper proposes a two-stage two-level model for the energy pricing and dispatch problem faced by a smart grid retailer who plays the role of an intermediary agent between a wholesale energy market and end consumers. Demand response of consumers with respect to the retail price is characterized by a Stackelberg game in the first stage, thus the first stage has two levels. A risk-aversive energy dispatch accounting for market price uncertainty is modeled by a linear robust optimization with objective uncertainty in the second stage. The proposed model is transformed to a mixed integer linear program (MILP) by jointly using the Karush-Kuhn-Tucker (KKT) condition, the disjunctive constraints, and the duality theory. We propose a heuristic method to select the parameter in disjunctive constraints based on the interpretation of Lagrange multipliers. Moreover, we suggest solving an additional linear program (LP) to acquire a possible enhanced bidding strategy that guarantees a Pareto improvement on the retailerÂ´s profit over the entire uncertainty set. Case studies demonstrate the proposed model and method is valid.
