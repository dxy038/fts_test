We have investigated energy management of a small scale electrical microgrid comprised of local renewable generation, consumption and storage units. The microgrid has the possibility of connection to the electricity grid as well to compensate for energy deficit. The objective is to fulfill microgrid´s energy demands from the local electricity producers as much as possible. The other objective is to manage the consumption such that consumption costs are minimum for all households. To fulfill the objectives, as the first step of designing a hierarchical controller, we focused on designing an energy and cost minimizing controller for one building. To this aim, a model predictive controller is formulated to schedule the building´s energy consumption using potential load flexibility. Simulation results show the economically optimal energy consumption of one building based on the defined load types, a user-specified comfort criterion and the grid electricity price.
