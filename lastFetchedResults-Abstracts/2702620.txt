In this paper, we study the problem of determining the size of battery storage used in grid-connected photovoltaic (PV) systems. In our setting, electricity is generated from PV and is used to supply the demand from loads. Excess electricity generated from the PV can be either sold back to the grid or stored in a battery, and electricity must be purchased from the electric grid if the PV generation and battery discharging cannot meet the demand. Due to the time-of-use electricity pricing and net metered PV systems, electricity can also be purchased from the grid when the price is low, and be sold back to the grid when the price is high. The objective is to minimize the cost associated with net power purchase from the electric grid and the battery capacity loss while at the same time satisfying the load and reducing the peak electricity purchase from the grid. Essentially, the objective function depends on the chosen battery size. We want to find a unique critical value (denoted as <i>C</i><sub>ref</sub><i>c</i> ) of the battery size such that the total cost remains the same if the battery size is larger than or equal to <i>C</i><sub>ref</sub><i>c</i>, and the cost is strictly larger if the battery size is smaller than <i>C</i><sub>ref</sub><i>c</i>. We obtain a criterion for evaluating the economic value of batteries compared to purchasing electricity from the grid, propose lower and upper bounds on <i>C</i><sub>ref</sub><i>c</i>, and introduce an efficient algorithm for calculating its value; these results are validated via simulations.
