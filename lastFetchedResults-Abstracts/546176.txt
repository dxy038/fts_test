In this article, a multiproduct production-inventory system with stochastic demand and production time, with and without capacity constraint, is considered. Our purpose is to determine the optimal conditions for each product when we must select between make to stock and make to order production systems. The objective is minimizing total inventory and backlog costs. We include the new assumptions regarding the models found in the literature by considering imperfect quality and delayed inspection. Also, the results of a single stage are extended to a multi stage production system, where there is a network of machines. The problems are modeled using queue theory principals.  
Consider a manufacturer that produces different items with stochastic demand. The processing times of an item at each stage of the production process are random variables. If there are a great number of parallel processors at each stage, then, an infinite capacity for the manufacturing system is assumed.
In this paper, first, we considered a single stage production system with infinite capacity. There is a given probability to produce a defective item. The detected defective items are not recycled into the system and are waste items. The inspection time is very short, compared with processing time, and is ignorable. The processing times and demands follow the Poisson probability distribution.
The second developed model is similar to the first, but, with one difference. Here we limited the capacity of the production.
The third model is an extension of the second one, where we consider a non-zero inspection time of the final product. The results show that inspection time has no influence on the optimal policy.
Finally, we developed multi stage models in two cases: infinite and finite capacity. In multi stage systems, there is a probability for a given item to continue the process from one stage to the next. Also, the number of necessary stages to complete an item is a random variable, and, at each stage, there is a probability that an item will go directly to the inventory store.
Consideration of machine breakdown probability and limited storage capacity could be suitable topics for further research.

