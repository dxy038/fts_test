Wireless network coding has attracted considerable research interest due to its promise of delivering increased capacity with high energy efficiency via the transmission of packet combinations from multiple flows. Much of this interest is based on the approach of the COPE protocol [1], which uses broadcasts of XOR combinations of packets to reduce the number of transmissions required, as long as they can be immediately decoded at the next hop of the respective flows. In this paper, we focus on the question of optimal routing of a bidirectional flow between a single pair of endpoints in the presence of wireless network coding, where the links are imperfect and have positive, and possibly asymmetric, packet erasure probabilities. Unlike previous studies, we explicitly allow packets to be forwarded in the network in a coded form, to be ultimately decoded by the destinations. We pose the optimization problem of finding the optimal path in each direction, so as to minimize the expected overall number of transmissions required to successfully deliver one packet in each direction of the flow, and present a polynomial-time algorithm for its solution. In particular, we demonstrate that, counterintuitively, it is possible for the optimal pair of paths for the bidirectional flow to have an overlapping section where packets are transmitted in the same direction, and illustrate the importance of this possibility by evaluating the performance of optimal network coding paths in random and asymmetric mesh topologies of between 9 and 36 nodes.
