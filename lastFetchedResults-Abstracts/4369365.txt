Data-driven label switching routers (LSR) classify flows into short-lived flows and long-lived flows. Short-lived flows are suitable for layer-3 software forwarding, while long-lived flows benefit from layer-2 hardware switching. Constrained by the capacity of an LSR, proper balance of short- and long-lived flows would maximize the overall forwarding performance, and an effective flow classification scheme is crucial. This paper proposes an approach to adaptive flow classification based on the max objective for the cache table utilization for the active long-lived flows and min objective for the average number of delayed long-lived flows, constrained by the capacity of the control processor. Based on the theoretical development, we design a controller to implement this algorithm. Simulation results show the optimality of the algorithm against the optimal solution of the static algorithm, and also demonstrate the robustness of the proposed adaptive algorithm in response to abrupt changes in the input traffic
