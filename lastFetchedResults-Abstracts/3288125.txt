This paper presents a control scheme in order to manage a laboratory-scale microgrid in a economic way. The main aim of this paper is the comparison between different control strategies. This microgrid is located in Seville (Spain) and incorporates an electrolyzer, metal hybrid storage, fuel cell and a battery set, as well as electronic load and generator as main components. This allows us to study smartgrids with different renewable sources (emulated by the electronic generator) and energy storage based on hydrogen under realistic scenarios. The control objective is to regulate the plant fulfilling the energy demand. This is posed as a tracking problem to be solved. A first approach is a two layer controller composed by a scheduler layer and an offset free LQR layer with output feedforward. This controller provides nice results and although its control layer does not take into account the operational limits of the plant, it gets the best performance from a optimal point of view. A one layer model predictive control for tracking has also been designed and tested in order to increase the performance of the first approach. The obtained results show that this last approach is a good control technique for this class of plants.
