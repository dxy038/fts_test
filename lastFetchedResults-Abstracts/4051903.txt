The magnetic fields of antenna and magnet used in inside-out nuclear magnetic resonance (NMR) well-logging tool are computed using a finite-element method (FEM). A typical operating frequency of such tools is 2 MHz, at which the skin depth is about 47 &#956;m for copper conductor. A direct application of FEM to evaluate power loss at such frequency, therefore, requires very fine discretization of the conductors, which, in turn, makes the problem numerically ill-conditioned. A perturbation technique along with FEM is used to evaluate the power loss in conductors that avoids the need for small discretization steps along the conductor thickness. The design of the magnet, on the other hand, is complicated by the fact that the model is nonlinear in nature because of the presence of ferrites and steel materials surrounding the magnet and because the size of the problem is usually quite large; quarter of a million unknowns is fairly common. A typical nonlinear FEM model requires about 35 h of central processing unit (CPU) time on a Sun Ultra 60 296 MHz workstation with one gigabyte of RAM. The magnet is built by stacking several magnet segments along the axial direction and the objective of the design is to magnetize these segments in such a way so as to produce a desired field profile in front of the magnet. It generally requires many executions of the nonlinear FEM model. An optimal control technique is used in conjunction with the FEM to speed up the design process. Very good agreement between the measured and computed antenna efficiency and magnetic field is obtained thus validating the numerical model
