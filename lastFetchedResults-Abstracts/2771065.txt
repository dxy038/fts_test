An optimal control approach is used to solve the problem of routing in sensor networks where the goal is to maximize the networkÂ´s lifetime. In our analysis, the energy sources (batteries) at nodes are not assumed to be &#8220;ideal&#8221; but rather behaving according to a dynamic energy consumption model, which captures the nonlinear behavior of actual batteries. We show that in a fixed topology case there exists an optimal policy consisting of time-invariant routing probabilities, which may be obtained by solving a set of relatively simple nonlinear programming (NLP) problems. We also show that this optimal policy is, under very mild conditions, robust with respect to the battery model used. Further, we consider a joint routing and initial energy allocation problem over the network nodes with the same network lifetime maximization objective. We prove that the solution to this problem is given by a policy that depletes all node energies at the same time and that the corresponding energy allocation and routing probabilities are obtained by solving an NLP problem. Numerical examples are included to illustrate the optimality of the time-invariant policy and its robustness with respect to the battery model used.
