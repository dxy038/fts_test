A novel joint analyzing-encoding framework is proposed in this paper. With this framework, the video analysis and the video coding can be integrated together, which can decrease the computational complexity of the video process system due to the obtained shared information. A lightweight content-adaptive video coding scheme can be achieved by using the presented framework for H.264 standard. The side encoding information, including motion vectors (MVs) and sum of absolute differences (SADs), can be used to reduce the computation cost of the moving region analysis. First, the rectangular shape and the displacement information of the moving region in the current encoded frame are obtained by employing a robust binary detection method, which is based on the adaptive threshold and the fast components labeling algorithm. Then, the rectangular shape information of the next frame is achieved by using a simple but effective prediction method, which considers the principle of the temporal motion constraint. Finally, a motion importance mask map (MIMP) is obtained according to the predicted rectangular shape information. Meanwhile, a category of frequency coefficient suppression(FCS) technique in the transform domain is presented to avoid the use of the complex MB-layer rate control method. With MIMP and FCS, a lightweight content-adaptive video coding scheme is realized based on a simple frame-layer rate control method. Experimental results show that the proposed scheme can detect and predict the moving regions fast and improve the objective/subjective visual quality significantly for the moving regions.
