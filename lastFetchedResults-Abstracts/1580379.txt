We study a stochastic optimization problem under constraints in a general framework including financial models with constrained portfolios, labor income and large investor models and reinsurance models. We also impose American-type constraint on the state space process. General objective functions including deterministic or random utility functions and shortfall risk loss functions are considered. We first prove existence and uniqueness result to this optimization problem. In a second part, we develop a dual formulation under minimal assumptions on the objective functions, which are the analogue of the asymptotic elasticity condition of Kramkov and Schachermayer (1999).
