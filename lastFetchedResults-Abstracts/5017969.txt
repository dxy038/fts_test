Mobile devices adopt the IEEE 802.11 PSM (Power-Saving Mode) scheme and its enhancements to reduce their energy consumption when using Wi-Fi interfaces. However, the capability of PSM to save energy is limited when the WLANs are highly congested by other Wi-Fi clients. In this paper, instead of further pursuing the trade-off between power saving and the incurred delay on the client side, we take a different approach and explore the energy saving potential by considering the scheduling policy on the Access Point (AP) side. We find that the traditional packet-level first-come-first-serve policy is not sleep optimal since it keeps the PSM clients awake unnecessarily. We propose SOFA, an AP-centric scheme, which helps PSM clients save energy by minimizing the time they are forced to stay awake while down link traffic is being transmitted to other clients. SOFA delivers down link packets to the PSM clients in an optimal sequence, such that several objective are simultaneously achieved: (i) system-sleep optimality, (ii) energy-fairness, (iii) attention fairness, and (iv) no unnecessary deferral of packets beyond a beacon period. First, it determines an attention quota for each client at the beginning of each beacon period, without requiring any knowledge of available wireless capacity. Then it takes the attention "quota\´\´ and attention request as inputs to decide the down link packet scheduling. We prove the stability and optimality of SOFA. Simulation results shows SOFA dramatically decreases the energy consumption of PSM clients in a crowded WLAN, especially for those clients with small attention requests.
