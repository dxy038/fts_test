Hybrid electrical energy storage (HEES) systems, composed of multiple banks of heterogeneous electrical energy storage (EES) elements with their unique strengths and weaknesses, have been introduced to efficiently store and retrieve electrical energy while attaining performance metrics that are close to their respective best values across their constituent EES elements. This paper is the first paper to formally describe the charge allocation problem and provide a systematic solution method aiming at the maximum charge allocation efficiency, which performing proper distribution of the incoming power to selected destination banks. We introduce a generalized HEES architecture and build the corresponding electrical circuit models of the chargers and banks. We formulate a mixed integer nonlinear optimization problem, where the objective function is the global charge allocation efficiency, and the constraints are energy conservations, with careful consideration of the conversion power loss in the chargers, rate capacity effect and self-discharge of the EES elements, charge transfer losses, and so on. We present a rigorous algorithm to achieve a near-optimal global charge allocation efficiency for long-term charge allocation process (i.e., tens of hours.) Experimental results based on a photovoltaic cell array as the incoming power source and a HEES system comprised on batteries and supercapacitors demonstrate a significant gain in charge allocation efficiency for the proposed algorithm.
