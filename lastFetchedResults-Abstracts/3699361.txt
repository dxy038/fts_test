There has been a growing demand for using active power filters (APFs) for grid-connected converter systems based on nonconventional energy sources such as solar, wind, and fuel cells. In addition to power quality conditioning, the APF can also be used for bidirectional active power exchange with the three-phase four-wire grid and, therefore, acts as a multifunctional compensator. This paper presents a four-leg shunt multifunctional grid-connected power quality compensator. The compensator reference currents are generated using the instantaneous p-q-r theory. This paper proposes a simple modification to the conventional theory to eliminate the source neutral current from the three-phase four-wire power system. A digital controller is used to implement dead-beat current control. The outputs of the digital current controller are used as reference voltages for a 3-D space vector modulator (3D-SVM). A new approach for pulse width modulation waveform generation in 3D-SVM is proposed. All the intermediate steps are discussed from the viewpoint of implementation on a digital signal processor field-programmable gate array platform. The multifunctional compensator is analyzed, simulated, and tested experimentally for the most practical conditions in the power system, and the results are presented.
