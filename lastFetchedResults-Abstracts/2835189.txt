In this paper, we consider the problem of optimal real and reactive power management for a residential user with renewable energy production, photovoltaic (PV) inverter and battery. The user´s objective is to find an optimal control policy of PV inverter and battery to minimize his time average cost. We propose an algorithm based on Lyapunov optimization techniques. This algorithm has low complexity and does not need prior knowledge of system´s probability distribution. Simulation results show our algorithm can significantly reduce user´s cost. We also prove this algorithm is able to achieve near-optimal performance as the battery size increases.
